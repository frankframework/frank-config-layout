<div class="wrapper">
  <div id="scale-overlay">{{scale}}%</div>
  <svg *ngIf="drawing !== null" appSvgZoomPan (newScale)="newScale($event)" preserveAspectRatio="none">
    <defs>
      <!-- A marker to be used as an arrowhead -->
      <marker
        id="arrow"
        viewBox="0 0 4 4"
        refX="4"
        refY="2"
        markerWidth="4"
        markerHeight="4"
        orient="auto-start-reverse">
        <path d="M 0 0 L 4 2 L 0 4 z" />
      </marker>
    </defs>
    <g *ngFor="let rectangle of drawing.rectangles">
      <rect
        [attr.x]="rectangle.x"
        [attr.y]="rectangle.y"
        [attr.width]="rectangle.width"
        [attr.height]="rectangle.height"
        id="rectangle.id"
        [ngClass]="getRectangleClass(rectangle)"
        (click)="handleShapeClicked(rectangle.id)">
      </rect>
      <text
        [attr.x]="rectangle.centerX"
        [attr.y]="rectangle.centerY"
        text-anchor="middle" dominant-baseline="middle" class="nodeText">
        {{rectangle.text}}
      </text>
    </g>
    <polyline *ngFor="let line of drawing.lines"
      attr.points="{{line.x1}},{{line.y1}} {{line.x2}},{{line.y2}}"
      [attr.marker-end]="line.arrow ? 'url(#arrow)' : null"
      id="line.id"
      [ngClass]="getLineClass(line)"
      (click)="handleShapeClicked(line.id)"/>
  </svg>
</div>